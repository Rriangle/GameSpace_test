<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>會員錢包 - GameSpace</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #7557ff;
            --secondary-color: #34d2ff;
            --success-color: #22c55e;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --bg-light: linear-gradient(135deg, #eef3f8 0%, #ffffff 100%);
            --glass-bg: rgba(255, 255, 255, 0.75);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        body {
            background: var(--bg-light);
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", sans-serif;
            line-height: 1.65;
        }

        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(14px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            box-shadow: 0 18px 40px rgba(17, 24, 39, 0.12);
            transition: all 0.16s ease;
        }

        .glass-card:hover {
            transform: translateY(-3px) scale(1.01);
            box-shadow: 0 24px 48px rgba(17, 24, 39, 0.18);
        }

        .navbar {
            background: var(--glass-bg) !important;
            backdrop-filter: blur(14px);
            border-bottom: 1px solid var(--glass-border);
        }

        .wallet-balance {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
        }

        .balance-amount {
            font-size: 3rem;
            font-weight: bold;
            margin: 20px 0;
        }

        .balance-label {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .coupon-card {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            margin: 10px 0;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .coupon-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(117, 87, 255, 0.15);
        }

        .coupon-card.used {
            opacity: 0.6;
            background: #f9fafb;
        }

        .qr-code {
            width: 150px;
            height: 150px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            text-align: center;
            margin: 0 auto;
        }

        .transaction-item {
            border-left: 4px solid var(--primary-color);
            padding: 15px;
            margin: 10px 0;
            background: var(--glass-bg);
            border-radius: 8px;
        }

        .transaction-item.income {
            border-left-color: var(--success-color);
        }

        .transaction-item.expense {
            border-left-color: var(--danger-color);
        }

        .points-display {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .points-income {
            color: var(--success-color);
        }

        .points-expense {
            color: var(--danger-color);
        }

        .tab-content {
            min-height: 400px;
        }

        .redeem-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .redeem-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(117, 87, 255, 0.3);
        }

        .redeem-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--glass-bg);
            backdrop-filter: blur(14px);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 15px 20px;
            box-shadow: 0 8px 20px rgba(17, 24, 39, 0.15);
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }
    </style>
</head>
<body>
    <!-- 導航欄 -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html">
                <i class="fas fa-gamepad me-2" style="color: var(--primary-color);"></i>
                GameSpace
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">首頁</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="pet.html">寵物系統</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="minigame.html">小遊戲</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="wallet.html">會員錢包</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="signin.html">每日簽到</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- 主要內容 -->
    <div class="container" style="margin-top: 100px;">
        <!-- 錢包餘額 -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="wallet-balance">
                    <div class="balance-label">當前會員點數餘額</div>
                    <div class="balance-amount" id="balanceAmount">12,580</div>
                    <div class="balance-label">點數</div>
                </div>
            </div>
        </div>

        <!-- 標籤導航 -->
        <div class="row mb-4">
            <div class="col-12">
                <ul class="nav nav-pills nav-fill" id="walletTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="redeem-tab" data-bs-toggle="pill" data-bs-target="#redeem" type="button" role="tab">
                            <i class="fas fa-gift me-2"></i>兌換中心
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="coupons-tab" data-bs-toggle="pill" data-bs-target="#coupons" type="button" role="tab">
                            <i class="fas fa-ticket-alt me-2"></i>商城優惠券
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="vouchers-tab" data-bs-toggle="pill" data-bs-target="#vouchers" type="button" role="tab">
                            <i class="fas fa-qrcode me-2"></i>電子優惠券
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="transactions-tab" data-bs-toggle="pill" data-bs-target="#transactions" type="button" role="tab">
                            <i class="fas fa-history me-2"></i>收支明細
                        </button>
                    </li>
                </ul>
            </div>
        </div>

        <!-- 標籤內容 -->
        <div class="tab-content" id="walletTabContent">
            <!-- 兌換中心 -->
            <div class="tab-pane fade show active" id="redeem" role="tabpanel">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="glass-card p-4">
                            <h4 class="fw-bold mb-4">
                                <i class="fas fa-gift me-2" style="color: var(--primary-color);"></i>
                                商城優惠券兌換
                            </h4>
                            <div class="coupon-card">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="fw-bold">全站9折優惠券</h6>
                                        <p class="text-muted mb-0">適用於全站商品，有效期30天</p>
                                    </div>
                                    <div class="text-end">
                                        <div class="points-display text-warning">500</div>
                                        <div class="small text-muted">點數</div>
                                    </div>
                                </div>
                                <button class="redeem-btn w-100 mt-3" onclick="redeemCoupon('discount10', 500)">
                                    <i class="fas fa-shopping-cart me-2"></i>立即兌換
                                </button>
                            </div>
                            <div class="coupon-card">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="fw-bold">滿1000送200優惠券</h6>
                                        <p class="text-muted mb-0">滿1000元送200元，有效期15天</p>
                                    </div>
                                    <div class="text-end">
                                        <div class="points-display text-warning">800</div>
                                        <div class="small text-muted">點數</div>
                                    </div>
                                </div>
                                <button class="redeem-btn w-100 mt-3" onclick="redeemCoupon('cashback200', 800)">
                                    <i class="fas fa-shopping-cart me-2"></i>立即兌換
                                </button>
                            </div>
                            <div class="coupon-card">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="fw-bold">免運費優惠券</h6>
                                        <p class="text-muted mb-0">全站免運費，有效期7天</p>
                                    </div>
                                    <div class="text-end">
                                        <div class="points-display text-warning">300</div>
                                        <div class="small text-muted">點數</div>
                                    </div>
                                </div>
                                <button class="redeem-btn w-100 mt-3" onclick="redeemCoupon('freeship', 300)">
                                    <i class="fas fa-shopping-cart me-2"></i>立即兌換
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="glass-card p-4">
                            <h4 class="fw-bold mb-4">
                                <i class="fas fa-qrcode me-2" style="color: var(--secondary-color);"></i>
                                電子優惠券兌換
                            </h4>
                            <div class="coupon-card">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="fw-bold">星巴克咖啡券</h6>
                                        <p class="text-muted mb-0">中杯拿鐵一杯，有效期30天</p>
                                    </div>
                                    <div class="text-end">
                                        <div class="points-display text-warning">1,200</div>
                                        <div class="small text-muted">點數</div>
                                    </div>
                                </div>
                                <button class="redeem-btn w-100 mt-3" onclick="redeemVoucher('starbucks', 1200)">
                                    <i class="fas fa-coffee me-2"></i>立即兌換
                                </button>
                            </div>
                            <div class="coupon-card">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="fw-bold">麥當勞套餐券</h6>
                                        <p class="text-muted mb-0">大麥克套餐一份，有效期15天</p>
                                    </div>
                                    <div class="text-end">
                                        <div class="points-display text-warning">800</div>
                                        <div class="small text-muted">點數</div>
                                    </div>
                                </div>
                                <button class="redeem-btn w-100 mt-3" onclick="redeemVoucher('mcdonalds', 800)">
                                    <i class="fas fa-hamburger me-2"></i>立即兌換
                                </button>
                            </div>
                            <div class="coupon-card">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="fw-bold">電影票優惠券</h6>
                                        <p class="text-muted mb-0">電影票買一送一，有效期20天</p>
                                    </div>
                                    <div class="text-end">
                                        <div class="points-display text-warning">1,500</div>
                                        <div class="small text-muted">點數</div>
                                    </div>
                                </div>
                                <button class="redeem-btn w-100 mt-3" onclick="redeemVoucher('movie', 1500)">
                                    <i class="fas fa-film me-2"></i>立即兌換
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 商城優惠券 -->
            <div class="tab-pane fade" id="coupons" role="tabpanel">
                <div class="glass-card p-4">
                    <h4 class="fw-bold mb-4">
                        <i class="fas fa-ticket-alt me-2" style="color: var(--primary-color);"></i>
                        我的商城優惠券
                    </h4>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="coupon-card">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="fw-bold">全站9折優惠券</h6>
                                        <p class="text-muted mb-1">適用於全站商品</p>
                                        <p class="small text-muted mb-0">有效期至：2024-02-15</p>
                                    </div>
                                    <div class="text-end">
                                        <span class="badge bg-success">可使用</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="coupon-card">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="fw-bold">滿1000送200優惠券</h6>
                                        <p class="text-muted mb-1">滿1000元送200元</p>
                                        <p class="small text-muted mb-0">有效期至：2024-01-30</p>
                                    </div>
                                    <div class="text-end">
                                        <span class="badge bg-success">可使用</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="coupon-card used">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="fw-bold">免運費優惠券</h6>
                                        <p class="text-muted mb-1">全站免運費</p>
                                        <p class="small text-muted mb-0">已使用於：2024-01-10</p>
                                    </div>
                                    <div class="text-end">
                                        <span class="badge bg-secondary">已使用</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="coupon-card">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="fw-bold">新用戶專享券</h6>
                                        <p class="text-muted mb-1">首次購買8折優惠</p>
                                        <p class="small text-muted mb-0">有效期至：2024-02-20</p>
                                    </div>
                                    <div class="text-end">
                                        <span class="badge bg-success">可使用</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 電子優惠券 -->
            <div class="tab-pane fade" id="vouchers" role="tabpanel">
                <div class="glass-card p-4">
                    <h4 class="fw-bold mb-4">
                        <i class="fas fa-qrcode me-2" style="color: var(--secondary-color);"></i>
                        我的電子優惠券
                    </h4>
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="coupon-card">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <h6 class="fw-bold">星巴克咖啡券</h6>
                                        <p class="text-muted mb-1">中杯拿鐵一杯</p>
                                        <p class="small text-muted mb-0">有效期至：2024-02-15</p>
                                    </div>
                                    <div class="text-end">
                                        <span class="badge bg-success">可使用</span>
                                    </div>
                                </div>
                                <div class="qr-code">
                                    <div>
                                        <div style="font-size: 24px; margin-bottom: 5px;">☕</div>
                                        <div>QR Code</div>
                                        <div style="font-size: 10px;">SB20240115001</div>
                                    </div>
                                </div>
                                <button class="btn btn-primary w-100 mt-3" onclick="useVoucher('starbucks')">
                                    <i class="fas fa-qrcode me-2"></i>顯示QR Code
                                </button>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="coupon-card">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <h6 class="fw-bold">麥當勞套餐券</h6>
                                        <p class="text-muted mb-1">大麥克套餐一份</p>
                                        <p class="small text-muted mb-0">有效期至：2024-01-30</p>
                                    </div>
                                    <div class="text-end">
                                        <span class="badge bg-success">可使用</span>
                                    </div>
                                </div>
                                <div class="qr-code">
                                    <div>
                                        <div style="font-size: 24px; margin-bottom: 5px;">🍔</div>
                                        <div>QR Code</div>
                                        <div style="font-size: 10px;">MC20240115002</div>
                                    </div>
                                </div>
                                <button class="btn btn-primary w-100 mt-3" onclick="useVoucher('mcdonalds')">
                                    <i class="fas fa-qrcode me-2"></i>顯示QR Code
                                </button>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="coupon-card used">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <h6 class="fw-bold">電影票優惠券</h6>
                                        <p class="text-muted mb-1">電影票買一送一</p>
                                        <p class="small text-muted mb-0">已使用於：2024-01-12</p>
                                    </div>
                                    <div class="text-end">
                                        <span class="badge bg-secondary">已使用</span>
                                    </div>
                                </div>
                                <div class="qr-code" style="opacity: 0.5;">
                                    <div>
                                        <div style="font-size: 24px; margin-bottom: 5px;">🎬</div>
                                        <div>QR Code</div>
                                        <div style="font-size: 10px;">MV20240112003</div>
                                    </div>
                                </div>
                                <button class="btn btn-secondary w-100 mt-3" disabled>
                                    <i class="fas fa-check me-2"></i>已使用
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 收支明細 -->
            <div class="tab-pane fade" id="transactions" role="tabpanel">
                <div class="glass-card p-4">
                    <h4 class="fw-bold mb-4">
                        <i class="fas fa-history me-2" style="color: var(--primary-color);"></i>
                        收支明細記錄
                    </h4>
                    <div class="mb-4">
                        <div class="row text-center">
                            <div class="col-4">
                                <div class="fw-bold text-success">+2,580</div>
                                <div class="small text-muted">本月收入</div>
                            </div>
                            <div class="col-4">
                                <div class="fw-bold text-danger">-1,200</div>
                                <div class="small text-muted">本月支出</div>
                            </div>
                            <div class="col-4">
                                <div class="fw-bold text-primary">+1,380</div>
                                <div class="small text-muted">淨收入</div>
                            </div>
                        </div>
                    </div>
                    <div class="transaction-item income">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="fw-bold mb-1">每日簽到獎勵</h6>
                                <p class="text-muted mb-0 small">2024-01-15 09:00</p>
                            </div>
                            <div class="text-end">
                                <div class="points-display points-income">+50</div>
                                <div class="small text-muted">點數</div>
                            </div>
                        </div>
                    </div>
                    <div class="transaction-item income">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="fw-bold mb-1">小遊戲勝利獎勵</h6>
                                <p class="text-muted mb-0 small">2024-01-15 14:30</p>
                            </div>
                            <div class="text-end">
                                <div class="points-display points-income">+200</div>
                                <div class="small text-muted">點數</div>
                            </div>
                        </div>
                    </div>
                    <div class="transaction-item expense">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="fw-bold mb-1">兌換星巴克咖啡券</h6>
                                <p class="text-muted mb-0 small">2024-01-15 16:20</p>
                            </div>
                            <div class="text-end">
                                <div class="points-display points-expense">-1,200</div>
                                <div class="small text-muted">點數</div>
                            </div>
                        </div>
                    </div>
                    <div class="transaction-item income">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="fw-bold mb-1">寵物互動獎勵</h6>
                                <p class="text-muted mb-0 small">2024-01-15 18:45</p>
                            </div>
                            <div class="text-end">
                                <div class="points-display points-income">+25</div>
                                <div class="small text-muted">點數</div>
                            </div>
                        </div>
                    </div>
                    <div class="transaction-item income">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="fw-bold mb-1">連續簽到獎勵</h6>
                                <p class="text-muted mb-0 small">2024-01-14 09:00</p>
                            </div>
                            <div class="text-end">
                                <div class="points-display points-income">+100</div>
                                <div class="small text-muted">點數</div>
                            </div>
                        </div>
                    </div>
                    <div class="transaction-item expense">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="fw-bold mb-1">兌換全站9折優惠券</h6>
                                <p class="text-muted mb-0 small">2024-01-13 20:15</p>
                            </div>
                            <div class="text-end">
                                <div class="points-display points-expense">-500</div>
                                <div class="small text-muted">點數</div>
                            </div>
                        </div>
                    </div>
                    <div class="transaction-item income">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="fw-bold mb-1">小遊戲勝利獎勵</h6>
                                <p class="text-muted mb-0 small">2024-01-13 15:30</p>
                            </div>
                            <div class="text-end">
                                <div class="points-display points-income">+150</div>
                                <div class="small text-muted">點數</div>
                            </div>
                        </div>
                    </div>
                    <div class="transaction-item income">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="fw-bold mb-1">每日簽到獎勵</h6>
                                <p class="text-muted mb-0 small">2024-01-13 09:00</p>
                            </div>
                            <div class="text-end">
                                <div class="points-display points-income">+50</div>
                                <div class="small text-muted">點數</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 通知 -->
    <div class="notification" id="notification">
        <div class="d-flex align-items-center">
            <i class="fas fa-check-circle me-2 text-success"></i>
            <span id="notificationText">兌換成功！</span>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 錢包數據
        let walletData = {
            balance: 12580,
            coupons: [
                { id: 'discount10', name: '全站9折優惠券', expiry: '2024-02-15', used: false },
                { id: 'cashback200', name: '滿1000送200優惠券', expiry: '2024-01-30', used: false },
                { id: 'freeship', name: '免運費優惠券', expiry: '2024-01-10', used: true },
                { id: 'newuser', name: '新用戶專享券', expiry: '2024-02-20', used: false }
            ],
            vouchers: [
                { id: 'starbucks', name: '星巴克咖啡券', expiry: '2024-02-15', used: false, code: 'SB20240115001' },
                { id: 'mcdonalds', name: '麥當勞套餐券', expiry: '2024-01-30', used: false, code: 'MC20240115002' },
                { id: 'movie', name: '電影票優惠券', expiry: '2024-01-12', used: true, code: 'MV20240112003' }
            ],
            transactions: [
                { type: 'income', amount: 50, description: '每日簽到獎勵', time: '2024-01-15 09:00' },
                { type: 'income', amount: 200, description: '小遊戲勝利獎勵', time: '2024-01-15 14:30' },
                { type: 'expense', amount: 1200, description: '兌換星巴克咖啡券', time: '2024-01-15 16:20' },
                { type: 'income', amount: 25, description: '寵物互動獎勵', time: '2024-01-15 18:45' },
                { type: 'income', amount: 100, description: '連續簽到獎勵', time: '2024-01-14 09:00' },
                { type: 'expense', amount: 500, description: '兌換全站9折優惠券', time: '2024-01-13 20:15' },
                { type: 'income', amount: 150, description: '小遊戲勝利獎勵', time: '2024-01-13 15:30' },
                { type: 'income', amount: 50, description: '每日簽到獎勵', time: '2024-01-13 09:00' }
            ]
        };

        // 初始化頁面
        document.addEventListener('DOMContentLoaded', function() {
            updateBalance();
            loadTransactions();
        });

        // 更新餘額顯示
        function updateBalance() {
            document.getElementById('balanceAmount').textContent = walletData.balance.toLocaleString();
        }

        // 兌換優惠券
        function redeemCoupon(couponId, cost) {
            if (walletData.balance >= cost) {
                walletData.balance -= cost;
                updateBalance();
                showNotification(成功兌換優惠券！花費  點數);
                
                // 添加到交易記錄
                addTransaction('expense', cost, 兌換);
            } else {
                showNotification('點數不足，無法兌換！', 'error');
            }
        }

        // 兌換電子優惠券
        function redeemVoucher(voucherId, cost) {
            if (walletData.balance >= cost) {
                walletData.balance -= cost;
                updateBalance();
                showNotification(成功兌換電子優惠券！花費  點數);
                
                // 添加到交易記錄
                addTransaction('expense', cost, 兌換);
            } else {
                showNotification('點數不足，無法兌換！', 'error');
            }
        }

        // 使用電子優惠券
        function useVoucher(voucherId) {
            const voucher = walletData.vouchers.find(v => v.id === voucherId);
            if (voucher && !voucher.used) {
                showNotification(正在顯示  的QR Code...);
                // 這裡可以顯示QR Code或跳轉到使用頁面
            }
        }

        // 獲取優惠券名稱
        function getCouponName(couponId) {
            const names = {
                'discount10': '全站9折優惠券',
                'cashback200': '滿1000送200優惠券',
                'freeship': '免運費優惠券'
            };
            return names[couponId] || '優惠券';
        }

        // 獲取電子優惠券名稱
        function getVoucherName(voucherId) {
            const names = {
                'starbucks': '星巴克咖啡券',
                'mcdonalds': '麥當勞套餐券',
                'movie': '電影票優惠券'
            };
            return names[voucherId] || '電子優惠券';
        }

        // 添加交易記錄
        function addTransaction(type, amount, description) {
            const now = new Date();
            const timeString = now.toLocaleString('zh-TW');
            
            walletData.transactions.unshift({
                type: type,
                amount: amount,
                description: description,
                time: timeString
            });
            
            loadTransactions();
        }

        // 載入交易記錄
        function loadTransactions() {
            // 這裡可以從後端載入交易記錄
            // 目前使用靜態數據
        }

        // 顯示通知
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const text = document.getElementById('notificationText');
            const icon = notification.querySelector('i');
            
            text.textContent = message;
            
            if (type === 'error') {
                icon.className = 'fas fa-exclamation-circle me-2 text-danger';
            } else {
                icon.className = 'fas fa-check-circle me-2 text-success';
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>
